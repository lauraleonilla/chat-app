(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a(338)},215:function(e,t){},337:function(e,t,a){},338:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(27),o=a.n(l),s=a(91),i=a.n(s),u=a(147),m=a(23),p=a(148),d=a.n(p),f=a(94),g=a(58),E=a(158),v=a(149),h=a(150),b=a.n(h),O=Object(r.createContext)(),w={General:[{from:"Me",msg:"Hello!"},{from:"You",msg:"Let's chat!"}],Javascript:[],Frameworks:[]},j=function(e,t){var a=t.payload,n=a.from,r=a.msg,c=a.topic;switch(t.type){case"RECEIVE MESSAGE":return Object(v.a)({},e,Object(g.a)({},c,[].concat(Object(E.a)(e[c]),[{from:n,msg:r}])));default:return e}},N=function(e){n.emit("chat",e)},S=function(e){var t=Object(r.useReducer)(j,w),a=Object(m.a)(t,2),l=a[0],o=a[1];n||(n=b()(":3001")).on("chat",function(e){o({type:"RECEIVE MESSAGE",payload:e})});var s=window.localStorage.getItem("loggedIn"),i=JSON.parse(s);return c.a.createElement(O.Provider,{value:{allChats:l,sendChatAction:N,user:i}},e.children)},y=a(345),C=a(339),k=function(e){var t=e.topic,a=Object(r.useContext)(O),n=a.user,l=a.sendChatAction,o=Object(r.useState)(""),s=Object(m.a)(o,2),i=s[0],u=s[1];return c.a.createElement("div",{className:"inputContainer"},c.a.createElement("form",null,c.a.createElement(y.a,{className:"chatInput",value:i,placeholder:"New message",onChange:function(e){u(e.target.value)},onKeyPress:function(e){i.length<1||"Enter"===e.key&&(e.preventDefault(),l({from:n,msg:i,topic:t}),u(""))},autoFocus:!0}),c.a.createElement(C.a,{className:"sendBtn",basic:!0,color:"teal",content:"Send",onClick:function(e){e.preventDefault(),i.length<1||(l({from:n,msg:i,topic:t}),u(""))}})))},I=function(e){var t=e.topics,a=e.selectTopic,n=t.map(function(e,t){return c.a.createElement(C.a,{id:"topicSelector",color:"teal",key:t,toggle:!0,active:!1,onClick:function(e){return a(e.target.innerText)}},e)});return c.a.createElement("div",{className:"topicDiv"},n)},x=function(){var e=Object(r.useContext)(O).allChats,t=Object.keys(e),a=Object(r.useState)(t[0]),n=Object(m.a)(a,2),l=n[0],o=n[1];return c.a.createElement("div",{className:"appContainer"},c.a.createElement(I,{topics:t,selectTopic:o}),c.a.createElement("div",{className:"chatInputWrapper"},c.a.createElement("div",{className:"chatBox"},e[l].map(function(e,t){return c.a.createElement("div",{key:t,className:"message"},c.a.createElement(f.a,{key:t,color:"teal"},e.from),c.a.createElement("span",{className:"messageText",key:e.msg},e.msg))})),c.a.createElement(k,{topic:l})))},J=function(e){var t=e.username,a=e.usernameHandler,n=e.login;return c.a.createElement("div",{className:"loginPage"},c.a.createElement("form",{onSubmit:n},c.a.createElement(y.a,{className:"loginInput",value:t,placeholder:"Write a username",onChange:a,autoFocus:!0}),c.a.createElement(C.a,{type:"submit",className:"loginBtn",basic:!0,color:"teal",content:"Login"})))},A=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(null),o=Object(m.a)(l,2),s=o[0],p=o[1];Object(r.useEffect)(function(){var e=window.localStorage.getItem("loggedIn");if(e){var t=JSON.parse(e);p(t)}},[]);var f=function(){var e=Object(u.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.length<1)){e.next=3;break}return e.abrupt("return");case 3:if("Enter"!==t.key){e.next=6;break}return e.next=6,d.a.post("/login",{userName:a});case 6:window.localStorage.setItem("loggedIn",JSON.stringify(a)),window.location.reload();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,null===s?c.a.createElement("div",null,c.a.createElement("div",{className:"loginHeader"},c.a.createElement("h1",null,"Login and chat with others")),c.a.createElement(J,{username:a,usernameHandler:function(e){n(e.target.value)},login:f})):c.a.createElement("div",null,c.a.createElement("div",{className:"headerContainer"},c.a.createElement("h1",null,"Select a topic and start chatting!")),c.a.createElement(S,null,c.a.createElement(x,null))))};a(337);o.a.render(c.a.createElement(A,null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.a6b6856f.chunk.js.map